# 🚀 デプロイ前チェックリスト

**本番環境にデプロイする前に、必ず確認してください。**

---

## ✅ 必須チェック項目

### 1. ファイル整合性

- [ ] すべてのHTMLファイルが存在する（19個）
- [ ] すべてのJavaScriptファイルが存在する（10個）
- [ ] すべてのCSSファイルが存在する（4個）
- [ ] すべてのJSONデータファイルが存在する（5個）
- [ ] PWAアイコンがすべて存在する（11個）
- [ ] manifest.jsonが正しく設定されている
- [ ] service-worker.jsが正しく動作する

### 2. セキュリティ

- [ ] Content Security Policy（CSP）が設定されている
- [ ] X-Content-Type-Optionsが設定されている
- [ ] X-Frame-Optionsが設定されている
- [ ] console.logを本番用に調整（または削除）
- [ ] APIキーなどの秘密情報が含まれていない
- [ ] .gitignoreが設定されている

### 3. パフォーマンス

- [ ] Service Workerが正しくキャッシュしている
- [ ] 画像ファイルが最適化されている
- [ ] 不要なコードが削除されている
- [ ] ファイルサイズが許容範囲内（< 2MB）

### 4. ブラウザ互換性

- [ ] Chrome（最新版）で動作確認
- [ ] Safari（最新版）で動作確認
- [ ] Edge（最新版）で動作確認
- [ ] Firefox（最新版）で動作確認
- [ ] モバイルブラウザで動作確認

### 5. 機能テスト

- [ ] test.shが100%合格する
- [ ] 問題演習が正常に動作する
- [ ] 模擬試験が正常に動作する
- [ ] 鳥獣図鑑が正常に動作する
- [ ] 実技ガイドが正常に動作する
- [ ] 学習ノートが正常に動作する
- [ ] 進捗ダッシュボードが正常に動作する
- [ ] ゲームモードが正常に動作する

### 6. データ整合性

- [ ] JSONファイルの構文エラーがない
- [ ] 問題数が100問以上ある
- [ ] 鳥獣データが40種以上ある
- [ ] 全ての問題に解説がある
- [ ] 選択肢が3つずつある

### 7. アクセシビリティ

- [ ] ARIA属性が適切に設定されている
- [ ] キーボード操作ができる
- [ ] スクリーンリーダーで読み上げられる
- [ ] カラーコントラストが十分（4.5:1以上）

### 8. ドキュメント

- [ ] README.mdが最新の情報になっている
- [ ] CHANGELOG.mdが更新されている
- [ ] ライセンスが明記されている
- [ ] コントリビューションガイドがある

---

## 🔧 デプロイ手順

### 方法1: Netlify

```bash
cd ~/projects/surprise/2026-02-06
./deploy.sh
# 1を選択（Netlify）
```

### 方法2: Vercel

```bash
cd ~/projects/surprise/2026-02-06
./deploy.sh
# 2を選択（Vercel）
```

### 方法3: GitHub Pages

```bash
cd ~/projects/surprise/2026-02-06
./deploy.sh
# 3を選択（GitHub Pages）
```

---

## 🧪 デプロイ後の確認

### 1. 基本動作確認

- [ ] トップページが表示される
- [ ] ナビゲーションリンクが動作する
- [ ] データファイルが読み込める
- [ ] LocalStorageが動作する

### 2. PWA確認

- [ ] manifest.jsonが読み込める
- [ ] Service Workerが登録される
- [ ] オフラインで動作する
- [ ] 「ホーム画面に追加」が表示される

### 3. パフォーマンス確認

- [ ] ページ読み込みが3秒以内
- [ ] First Contentful Paint < 1秒
- [ ] Time to Interactive < 3秒

### 4. セキュリティ確認

- [ ] HTTPSで配信されている
- [ ] CSPヘッダーが送信されている
- [ ] Mixed Contentがない

---

## 📊 監視項目

デプロイ後、以下を定期的に監視してください：

### パフォーマンス
- ページ読み込み時間
- サーバー応答時間
- リソース読み込み失敗率

### エラー
- JavaScriptエラー率
- 404エラー数
- データ読み込みエラー

### ユーザー体験
- 直帰率
- 平均セッション時間
- コンバージョン率（学習完了率）

---

## 🔄 ロールバック手順

問題が発生した場合：

1. **即座にロールバック**
   ```bash
   # Netlify
   netlify rollback

   # Vercel
   vercel rollback

   # GitHub Pages
   git revert HEAD
   git push origin main
   ```

2. **問題の調査**
   - エラーログを確認
   - ブラウザのコンソールをチェック
   - ユーザーからの報告を収集

3. **修正とテスト**
   - ローカルで問題を再現
   - 修正を実施
   - test.shで検証

4. **再デプロイ**
   - 修正版をデプロイ
   - 再度確認

---

## 📞 緊急連絡先

デプロイ後に問題が発生した場合：

- **GitHub Issues**: [リポジトリURL]/issues
- **メール**: [連絡先メールアドレス]

---

**このチェックリストに沿って、安全にデプロイしてください！** ✅

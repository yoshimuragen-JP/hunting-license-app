<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="狩猟免許試験に出題される狩猟鳥獣を網羅した図鑑。写真・特徴・識別ポイントで効率的に学習。">
    <meta name="keywords" content="狩猟鳥獣,識別,図鑑,狩猟免許,試験対策">
    <meta name="theme-color" content="#1e3c72">

    <!-- OGP -->
    <meta property="og:title" content="狩猟鳥獣図鑑 - 狩猟免許試験対策">
    <meta property="og:description" content="狩猟免許試験に出題される狩猟鳥獣を網羅した図鑑。写真・特徴・識別ポイントで効率的に学習。">
    <meta property="og:type" content="website">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="狩猟鳥獣図鑑 - 狩猟免許試験対策">
    <meta name="twitter:description" content="狩猟免許試験に出題される狩猟鳥獣を網羅した図鑑。">

    <title>狩猟鳥獣図鑑 - 狩猟免許試験対策</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'メイリオ', Meiryo, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .controls {
            background: #f8f9fa;
            padding: 30px;
            border-bottom: 3px solid #e9ecef;
        }

        .control-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
        }

        .search-box input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 12px 24px;
            border: 2px solid #dee2e6;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .filter-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .mode-switch {
            display: flex;
            gap: 10px;
            background: white;
            padding: 5px;
            border-radius: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .mode-btn {
            padding: 12px 24px;
            border: none;
            background: transparent;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .content {
            padding: 40px;
        }

        .animal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .animal-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
            border: 3px solid transparent;
        }

        .animal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .animal-card.huntable {
            border-color: #28a745;
        }

        .animal-card.non-huntable {
            border-color: #dc3545;
        }

        .animal-visual {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            position: relative;
            overflow: hidden;
        }

        .animal-visual.bird {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .animal-visual.mammal {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .status-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .status-badge.huntable {
            color: #28a745;
            border: 2px solid #28a745;
        }

        .status-badge.non-huntable {
            color: #dc3545;
            border: 2px solid #dc3545;
        }

        .animal-info {
            padding: 25px;
        }

        .animal-name {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .animal-category {
            font-size: 0.9em;
            color: #6c757d;
            margin-bottom: 15px;
        }

        .animal-size {
            font-size: 0.95em;
            color: #495057;
            margin-bottom: 15px;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 8px;
            display: inline-block;
        }

        .features-list {
            list-style: none;
            margin: 20px 0;
        }

        .features-list li {
            padding: 8px 0 8px 25px;
            position: relative;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .features-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }

        .animal-card.non-huntable .features-list li:before {
            content: "●";
            color: #dc3545;
        }

        .danger-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
            margin-top: 10px;
        }

        .danger-high {
            background: #dc3545;
            color: white;
        }

        .danger-medium {
            background: #ffc107;
            color: #000;
        }

        .danger-low {
            background: #28a745;
            color: white;
        }

        .tip-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
        }

        .tip-box strong {
            color: #856404;
        }

        .quiz-mode {
            display: none;
        }

        .quiz-mode.active {
            display: block;
        }

        .quiz-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            padding: 50px;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .quiz-visual {
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 120px;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            margin-bottom: 30px;
        }

        /* 動物画像スタイル */
        .animal-visual img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px;
        }

        .quiz-question {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .quiz-option {
            padding: 20px;
            border: 3px solid #dee2e6;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
            background: white;
        }

        .quiz-option:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }

        .quiz-option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .quiz-result {
            margin-top: 30px;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.1em;
        }

        .quiz-result.correct {
            background: #d4edda;
            color: #155724;
        }

        .quiz-result.incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .quiz-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .stats {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            text-align: center;
            min-width: 150px;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .comparison-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .comparison-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #495057;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .compare-item {
            padding: 15px;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .flashcard-mode {
            display: none;
        }

        .flashcard-mode.active {
            display: block;
        }

        .flashcard {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            padding: 50px;
            max-width: 600px;
            margin: 0 auto;
            min-height: 400px;
            cursor: pointer;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-front,
        .flashcard-back {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 50px;
        }

        .flashcard-back {
            transform: rotateY(180deg);
        }

        .flashcard-name {
            font-size: 2.5em;
            font-weight: bold;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .animal-grid {
                grid-template-columns: 1fr;
            }

            .control-group {
                flex-direction: column;
            }

            .search-box {
                min-width: 100%;
            }

            .quiz-options {
                grid-template-columns: 1fr;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }
        }

        .highlight {
            background: yellow;
            font-weight: bold;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .no-results-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .no-results-text {
            font-size: 1.5em;
            font-weight: bold;
        }
    </style>
    <link rel="stylesheet" href="ux-enhancements.css">
    <link rel="stylesheet" href="design-system.css">
    <link rel="stylesheet" href="ui-polish-additions.css">
</head>
<body>
    <!-- 戻るボタン（Quality Guardian追加） -->
    <div class="back-to-home-wrapper">
        <button class="btn-back-home" onclick="window.location.href='index.html'" aria-label="トップページに戻る" tabindex="1">
            トップページ
        </button>
    </div>

    <div class="container">
        <header>
            <h1>🦆 狩猟鳥獣図鑑 🐗</h1>
            <p class="subtitle">狩猟免許試験 完全対策 - 鳥類26種 + 獣類20種</p>
            <div style="margin-top: 20px; font-size: 0.95em; opacity: 0.95; line-height: 1.6;">
                <strong>📚 効果的な学習方法</strong><br>
                ① 図鑑モードで全体を把握 → ② 暗記カードで反復学習（推奨10周以上） → ③ クイズモードで実力確認（正答率90%以上が合格ライン）<br>
                <strong>⏱️ 5秒判別トレーニング</strong>：実猟では瞬時の判断が必須。写真を見て5秒以内に「狩猟可/不可・種名・識別根拠」を言えるまで訓練しましょう。
            </div>
        </header>

        <div class="controls">
            <div class="control-group">
                <div class="mode-switch">
                    <button class="mode-btn active" data-mode="browse">図鑑モード</button>
                    <button class="mode-btn" data-mode="quiz">クイズモード</button>
                    <button class="mode-btn" data-mode="flashcard">暗記カード</button>
                </div>

                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="🔍 鳥獣名で検索...">
                </div>
            </div>

            <div class="filter-buttons" style="margin-top: 20px;">
                <button class="filter-btn active" data-filter="all">すべて</button>
                <button class="filter-btn" data-filter="huntable">狩猟鳥獣のみ</button>
                <button class="filter-btn" data-filter="non-huntable">非狩猟鳥獣のみ</button>
                <button class="filter-btn" data-filter="birds">鳥類</button>
                <button class="filter-btn" data-filter="mammals">獣類</button>
                <button class="filter-btn" data-filter="ducks">カモ類</button>
                <button class="filter-btn" data-filter="crows">カラス類</button>
            </div>
        </div>

        <div class="content">
            <div class="browse-mode active">
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="totalCount">46</div>
                        <div class="stat-label">総鳥獣数</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="huntableCount">46</div>
                        <div class="stat-label">狩猟鳥獣</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="nonHuntableCount">0</div>
                        <div class="stat-label">非狩猟鳥獣</div>
                    </div>
                </div>

                <div class="animal-grid" id="animalGrid"></div>
                <div class="no-results" id="noResults" style="display: none;">
                    <div class="no-results-icon">🔍</div>
                    <div class="no-results-text">該当する鳥獣が見つかりませんでした</div>
                </div>
            </div>

            <div class="quiz-mode" id="quizMode">
                <div class="quiz-card">
                    <div class="quiz-visual" id="quizVisual">🦆</div>
                    <div class="quiz-question" id="quizQuestion">この鳥獣は狩猟鳥獣ですか？</div>
                    <div class="quiz-options">
                        <button class="quiz-option" data-answer="huntable">狩猟鳥獣</button>
                        <button class="quiz-option" data-answer="non-huntable">非狩猟鳥獣</button>
                    </div>
                    <div class="quiz-result" id="quizResult" style="display: none;"></div>
                    <div class="quiz-controls">
                        <button class="btn btn-primary" id="nextQuiz">次の問題</button>
                        <button class="btn btn-secondary" id="showAnswer">答えを見る</button>
                    </div>
                    <div class="stats" style="margin-top: 30px;">
                        <div class="stat-item">
                            <div class="stat-value" id="quizScore">0</div>
                            <div class="stat-label">正解数</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="quizTotal">0</div>
                            <div class="stat-label">出題数</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="quizAccuracy">0%</div>
                            <div class="stat-label">正答率</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flashcard-mode" id="flashcardMode">
                <div class="flashcard" id="flashcard">
                    <div class="flashcard-front">
                        <div class="quiz-visual" id="flashcardVisual">🦆</div>
                        <div class="flashcard-name" id="flashcardName">マガモ</div>
                        <p style="margin-top: 20px; color: #6c757d;">クリックして裏返す</p>
                    </div>
                    <div class="flashcard-back">
                        <div id="flashcardDetails"></div>
                        <p style="margin-top: 20px; color: #6c757d;">クリックして表に戻す</p>
                    </div>
                </div>
                <div class="quiz-controls" style="margin-top: 30px;">
                    <button class="btn btn-primary" id="nextCard">次のカード</button>
                    <button class="btn btn-secondary" id="shuffleCards">シャッフル</button>
                </div>
                <div class="stats" style="margin-top: 30px;">
                    <div class="stat-item">
                        <div class="stat-value" id="cardIndex">1</div>
                        <div class="stat-label">現在のカード</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="cardTotal">46</div>
                        <div class="stat-label">総カード数</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // データベース
        const animalsData = {
            birds: [
                {
                    name: "マガモ",
                    category: "カモ類",
                    size: "約60cm、体重約1.0-1.4kg",
                    emoji: "🦆",                    features: [
                        "オス：頭部が光沢のある緑色（繁殖期）、首に明瞭な白い輪",
                        "オス：嘴が鮮やかな黄色、胸が栗色で腰は黒い",
                        "オス：尾羽の上面にカールした飾り羽（識別の決め手）",
                        "メス：全体的に褐色で細かい斑点、嘴は橙と黒のまだら模様",
                        "淡水域（池、沼、川）を好み、海にはほとんど行かない",
                        "冬鳥として10月～3月に渡来、一部は留鳥化",
                        "群れで行動し、昼は休息、夕方から夜に活発に採餌",
                        "「グェーグェー」という濁った声で鳴く"
                    ],
                    huntable: true,
                    tip: "頭が緑色＋首に白い輪＋黄色い嘴の3点セットでマガモのオス確定。カモ類の代表種として最優先で覚えよう。メスはカルガモと間違えやすいが、嘴の色で区別（マガモは橙黒まだら、カルガモは先端のみ黄色）。",
                    confusedWith: ["カルガモ（メス同士）", "コガモ"],
                    huntingNote: "初心者向き。群れで行動するため発見しやすい。早朝の水辺がねらい目。"
                },
                {
                    name: "カルガモ",
                    category: "カモ類",
                    size: "約60cm、体重約0.9-1.2kg",
                    emoji: "🦆",                    features: [
                        "オスメス同色（雌雄同色）で識別が難しい",
                        "全体的に褐色、顔は淡褐色で黒い過眼線が2本走る",
                        "嘴は黒く、先端のみ黄色（最重要識別点）",
                        "足は橙黄色で水かきが発達",
                        "留鳥（一年中日本にいる）で繁殖もする",
                        "都市部の池や川にも生息、人慣れしている個体も多い",
                        "5-7月に雛を連れた親子の姿（カルガモ親子）が有名",
                        "「グワッグワッ」という濁った声で鳴く"
                    ],
                    huntable: true,
                    tip: "「カルガモ親子」でニュースになるあのカモ。嘴の先端だけ黄色いのが決め手（マガモのメスは嘴全体が橙黒まだら）。一年中いるので観察しやすい。覚え方：「カルガモの嘴は先っぽだけ軽（カル）く黄色」",
                    confusedWith: ["マガモのメス"],
                    huntingNote: "都市部に多く人慣れしているが、狩猟は必ず狩猟可能区域で。親子連れの時期（5-7月）は猟期外。"
                },
                {
                    name: "コガモ",
                    category: "カモ類",
                    size: "約37cm、体重約0.3-0.4kg",
                    emoji: "🦆",                    features: [
                        "日本最小のカモ（他のカモより一回り小さい）",
                        "オス：頭部が栗色、目の周りから後頭部にかけて緑色の帯",
                        "オス：体は灰色、胸に細かい波状模様",
                        "メス：全体的に褐色で細かい斑点、小型で地味",
                        "群れで行動することが多い、大群になることも",
                        "淡水域（池、沼、川）を好む",
                        "冬鳥として渡来、「ピリッピリッ」と鳴く",
                        "素早く飛び、機敏に動く"
                    ],
                    huntable: true,
                    tip: "「小さいカモ」で覚える。他のカモと並ぶと明らかに小さい。オスの頭は栗色＋緑の帯で美しい（マガモのような緑一色ではない）。覚え方：「コガモは小さい、頭は栗と緑のミックス」。",
                    confusedWith: ["他の小型カモ類"],
                    huntingNote: "小型で素早いため射撃技術が必要。群れで行動するため発見は容易。淡水域の水辺がねらい目。食用として美味。"
                },
                {
                    name: "ヨシガモ",
                    category: "カモ類",
                    size: "約48cm",
                    emoji: "🦆",                    features: [
                        "オス：頭部が赤褐色で光沢",
                        "オス：額が黄白色",
                        "嘴が黒い",
                        "冬鳥として渡来"
                    ],
                    huntable: true,
                    tip: "葦（ヨシ）の茂みに生息することから名前がついた。"
                },
                {
                    name: "オカヨシガモ",
                    category: "カモ類",
                    size: "約50cm",
                    emoji: "🦆",                    features: [
                        "オス：全体的に灰色",
                        "オス：尾の付け根が黒い",
                        "メス：褐色で地味",
                        "嘴が小さめ"
                    ],
                    huntable: true,
                    tip: "地味な外見だが、よく見ると細かい模様がある。"
                },
                {
                    name: "ヒドリガモ",
                    category: "カモ類",
                    size: "約49cm",
                    emoji: "🦆",                    features: [
                        "オス：額が黄白色（クリーム色）",
                        "オス：頭部が赤褐色",
                        "口笛のような鳴き声",
                        "群れで行動"
                    ],
                    huntable: true,
                    tip: "額が黄色いのが特徴。「ヒュー」という鳴き声も識別ポイント。"
                },
                {
                    name: "オナガガモ",
                    category: "カモ類",
                    size: "オス約75cm（尾羽含む）、メス約53cm、体重約0.8-1.2kg",
                    emoji: "🦆",                    features: [
                        "オス：尾羽が非常に長い（20cm以上、針のように尖る、最大の特徴）",
                        "オス：首が白く細長い、頭部は茶褐色",
                        "オス：体は灰色、胸は白い、優雅なシルエット",
                        "メス：全体的に褐色、尾は短い（オスとサイズ差大）",
                        "スマートで細身の体型、首が長い",
                        "淡水域を好む、冬鳥として渡来",
                        "「クルル」という柔らかい声",
                        "水面に首を突っ込んで採餌"
                    ],
                    huntable: true,
                    tip: "「尾長」の名の通り、オスの尾羽が異常に長い（針のように尖る）のが絶対的な識別ポイント。首も白く細長くスマート。メスは地味で尾も短いため、オスと別種に見えるほど。覚え方：「オナガガモはオスの尾が超長い、白い首」。",
                    confusedWith: ["他のカモ類（メス）"],
                    huntingNote: "オスは尾が長いため識別容易。優雅な外見で人気。淡水域の水辺がねらい目。食用として美味。"
                },
                {
                    name: "ハシビロガモ",
                    category: "カモ類",
                    size: "約50cm、体重約0.6-1.0kg",
                    emoji: "🦆",                    features: [
                        "嘴が非常に大きく平たい（しゃもじ状、最大の特徴）",
                        "オス：頭部が緑色（マガモに似る）、胸は白、脇腹は栗色",
                        "オス：嘴は黒い（マガモは黄色）",
                        "メス：全体的に褐色、嘴が大きい点は同じ",
                        "水面でくるくる回転しながら採餌（独特の行動）",
                        "嘴で水面のプランクトンを濾し取る",
                        "独特のシルエット、頭でっかちに見える",
                        "淡水域を好む、冬鳥として渡来"
                    ],
                    huntable: true,
                    tip: "「嘴広」の名の通り、しゃもじのような大きく平たい嘴が絶対的な識別ポイント。遠くからでもシルエットで判別可能（頭でっかちに見える）。水面でくるくる回る採餌行動も特徴的。覚え方：「ハシビロはしゃもじ嘴、くるくる回る」。",
                    confusedWith: ["マガモ（オス同士、頭の緑色が似る）"],
                    huntingNote: "嘴の形で瞬時に識別可能。独特の採餌行動も観察のポイント。淡水域の水辺がねらい目。"
                },
                {
                    name: "ホシハジロ",
                    category: "カモ類",
                    size: "約45cm",
                    emoji: "🦆",                    features: [
                        "オス：頭部が赤褐色",
                        "オス：胸が黒い",
                        "目が赤い",
                        "潜水採餌"
                    ],
                    huntable: true,
                    tip: "赤い目と赤褐色の頭が識別ポイント。"
                },
                {
                    name: "キンクロハジロ",
                    category: "カモ類",
                    size: "約40cm",
                    emoji: "🦆",                    features: [
                        "オス：頭部が黒く光沢",
                        "オス：後頭部に冠羽（ぼさぼさの毛）",
                        "目が黄色",
                        "潜水が得意"
                    ],
                    huntable: true,
                    tip: "「金黒」の名の通り、黒と金色（目）のコントラスト。頭がぼさぼさ。"
                },
                {
                    name: "スズガモ",
                    category: "カモ類",
                    size: "約45cm",
                    emoji: "🦆",                    features: [
                        "オス：頭部が黒く緑の光沢",
                        "大群で行動",
                        "海上に多い",
                        "潜水採餌"
                    ],
                    huntable: true,
                    tip: "海にいる大きな群れはスズガモのことが多い。"
                },
                {
                    name: "クロガモ",
                    category: "カモ類",
                    size: "約48cm",
                    emoji: "🦆",                    features: [
                        "オス：全身が黒い",
                        "オス：嘴に黄色い部分",
                        "海上に生息",
                        "潜水採餌"
                    ],
                    huntable: true,
                    tip: "真っ黒なカモ。海にいることが多い。"
                },
                {
                    name: "キジバト",
                    category: "ハト類",
                    size: "約33cm、体重約150-200g",
                    emoji: "🕊️",                    features: [
                        "首の横に青灰色と白の横縞模様（最重要識別点）",
                        "全体的に灰褐色で、背中はうろこ状の模様",
                        "尾羽の先端に白い帯がある",
                        "公園・住宅地・山地と幅広く生息",
                        "「デデッポー、デデッポー」と鳴く（別名ヤマバト）",
                        "地上をコツコツ歩いて種子を採餌",
                        "単独または2羽で行動することが多い",
                        "留鳥で一年中見られる"
                    ],
                    huntable: true,
                    tip: "首の横縞がキジバトの絶対的な証拠。ドバト（カワラバト）には横縞がなく首が虹色に光る。覚え方：「キジバトは首にキジ（横縞）模様」。「デデッポー」という鳴き声も識別に有効。",
                    confusedWith: ["ドバト（カワラバト）"],
                    huntingNote: "日本で唯一狩猟可能なハト。ドバト（カワラバト）は外来種で非狩猟鳥獣なので絶対に間違えないこと。首の横縞を必ず確認。"
                },
                {
                    name: "キジ",
                    category: "キジ類",
                    size: "オス約80cm（尾羽含む）、メス約60cm、体重オス約1kg、メス約0.8kg",
                    emoji: "🐦",                    features: [
                        "オス：頭部が光沢のある緑色、顔の皮膚が赤い（肉垂）、目の周りに赤い肉瘤",
                        "オス：体は銅赤色、翼に白い斑点、長い尾羽（縞模様）",
                        "メス：全体的に褐色で保護色、尾はオスより短い",
                        "日本の国鳥（1947年指定）だが狩猟鳥獣",
                        "草地・農耕地・河川敷に生息、地上性",
                        "「ケーンケーン」と鳴き、羽音を立てて飛ぶ（母衣打ち）",
                        "繁殖期（春）はオスが縄張り争いで激しく闘う",
                        "走るのが速く、危険時は飛ぶより走って逃げる"
                    ],
                    huntable: true,
                    tip: "日本の国鳥だが狩猟可能（国鳥=保護鳥ではない）。オスは派手で識別容易、メスは地味で他の鳥と間違えやすい。一部地域では繁殖保護のため「メスの捕獲禁止期間」あり（都道府県の猟期規則を要確認）。覚え方：「キジのオスは緑頭に赤顔、ケーンと鳴く」。",
                    confusedWith: ["ヤマドリ（メス同士）", "コジュケイ"],
                    huntingNote: "オスは派手で発見しやすいが警戒心が強い。メスは猟期に制限がある地域もあるため、猟期前に必ず都道府県の規則確認。草むらから突然飛び立つため驚かないこと。食用として美味。"
                },
                {
                    name: "ヤマドリ",
                    category: "キジ類",
                    size: "オス約125cm、メス約55cm",
                    emoji: "🐦",                    features: [
                        "オス：非常に長い尾羽",
                        "オス：銅赤色の体色",
                        "山地の森林に生息",
                        "警戒心が強い"
                    ],
                    huntable: true,
                    tip: "山に住むキジの仲間。尾が非常に長い。"
                },
                {
                    name: "ウズラ",
                    category: "キジ類",
                    size: "約20cm",
                    emoji: "🐦",                    features: [
                        "非常に小型",
                        "褐色で斑点模様",
                        "草地に生息",
                        "飛ぶのが苦手"
                    ],
                    huntable: true,
                    tip: "小さくて丸い。草むらに隠れている。"
                },
                {
                    name: "コジュケイ",
                    category: "キジ類",
                    size: "約27cm",
                    emoji: "🐦",                    features: [
                        "顔に白い眉斑",
                        "喉が白い",
                        "「チョットコイ」と鳴く",
                        "外来種"
                    ],
                    huntable: true,
                    tip: "「ちょっと来い」と鳴いているように聞こえる。"
                },
                {
                    name: "バン",
                    category: "クイナ類",
                    size: "約32cm",
                    emoji: "🐦",                    features: [
                        "額が赤い",
                        "嘴が赤い",
                        "全身が黒っぽい",
                        "水辺に生息"
                    ],
                    huntable: true,
                    tip: "額と嘴が赤いのが特徴。水辺を歩く。"
                },
                {
                    name: "ヤマシギ",
                    category: "シギ類",
                    size: "約34cm",
                    emoji: "🐦",                    features: [
                        "非常に長い嘴",
                        "目が頭の後ろ寄り",
                        "褐色の保護色",
                        "森林に生息"
                    ],
                    huntable: true,
                    tip: "シギの中で唯一の狩猟鳥獣。長い嘴が特徴。"
                },
                {
                    name: "タシギ",
                    category: "シギ類",
                    size: "約27cm",
                    emoji: "🐦",                    features: [
                        "長い嘴",
                        "褐色に白い縞模様",
                        "水田や湿地に生息",
                        "ジグザグ飛行"
                    ],
                    huntable: true,
                    tip: "水田でよく見る。飛ぶときジグザグに飛ぶ。"
                },
                {
                    name: "スズメ",
                    category: "スズメ類",
                    size: "約14cm、体重約24-27g",
                    emoji: "🐦",                    features: [
                        "頬に黒い丸い斑点（チークパッチ、最重要識別点）",
                        "喉と上胸が黒い（オス成鳥は広い、メス幼鳥は狭い）",
                        "頭は茶褐色、背中は茶色に黒い縦斑",
                        "嘴は太く短い円錐形（種子食に適応）",
                        "非常に身近な留鳥、人家周辺に生息",
                        "「チュンチュン」と鳴く、群れで行動",
                        "小鳥類で狩猟可能なのはスズメ、ヒヨドリ、ムクドリの3種のみ",
                        "秋冬に群れで稲穂を食害、農業害鳥の側面も"
                    ],
                    huntable: true,
                    tip: "日本人に最も馴染みのある鳥。頬の黒丸（チークパッチ）が絶対的証拠。小鳥で狩猟可能なのはスズメ・ヒヨドリ・ムクドリの3種のみで、それ以外の小鳥は全て非狩猟鳥獣。覚え方：「小鳥は3種（スヒム）だけ」。",
                    confusedWith: ["他の小鳥全般"],
                    huntingNote: "狩猟可能だが小さいため技術が必要。小鳥類は原則非狩猟なので、スズメ・ヒヨドリ・ムクドリ以外は絶対に撃たない。試験でも「小鳥で狩猟可能なのは3種のみ」は頻出。"
                },
                {
                    name: "ヒヨドリ",
                    category: "ヒヨドリ類",
                    size: "約27cm、体重約40-60g",
                    emoji: "🐦",                    features: [
                        "全体的に灰色、頭部はやや青灰色",
                        "頬が茶褐色（耳羽が茶色、最重要識別点）",
                        "下尾筒（尾の付け根下部）が赤褐色",
                        "「ヒーヨヒーヨ」「ピーピー」と甲高く鳴く（名前の由来）",
                        "果樹園で果実を食害、農業害鳥の側面",
                        "よく動き回り、木から木へ活発に飛び移る",
                        "留鳥または漂鳥、秋に群れで移動することも",
                        "小鳥類で狩猟可能な3種の1つ（スズメ、ヒヨドリ、ムクドリ）"
                    ],
                    huntable: true,
                    tip: "「ヒーヨヒーヨ」という鳴き声で即座にわかる。頬が茶色いのが視覚的な決め手。小鳥で狩猟可能なのは3種のみ（スズメ、ヒヨドリ、ムクドリ）なので、それ以外の小鳥は絶対に撃たない。覚え方：「ヒヨドリはヒーヨヒーヨ、頬茶色」。",
                    confusedWith: ["他の灰色の小鳥"],
                    huntingNote: "小鳥で狩猟可能な3種の1つ。果樹園周辺に多い。鳴き声で識別容易。小鳥類は原則非狩猟なので、スズメ・ヒヨドリ・ムクドリ以外は絶対に撃たないこと。"
                },
                {
                    name: "ムクドリ",
                    category: "ムクドリ類",
                    size: "約24cm、体重約70-90g",
                    emoji: "🐦",                    features: [
                        "嘴と脚が鮮やかな橙色（最重要識別点）",
                        "頬に白い斑点（耳羽が白っぽい）",
                        "全体的に黒褐色、翼に白い帯が見える",
                        "大群で行動、夕方に集団で塒（ねぐら）に帰る",
                        "「ギャーギャー」「キュルキュル」と騒がしく鳴く",
                        "駅前や街路樹で騒音・糞害問題を起こす",
                        "都市部にも多い、雑食性（昆虫、果実）",
                        "小鳥類で狩猟可能な3種の1つ（スズメ、ヒヨドリ、ムクドリ）"
                    ],
                    huntable: true,
                    tip: "橙色の嘴と脚で即座に識別可能。大群で行動し、夕方に集団で飛ぶ姿はムクドリの証拠。小鳥で狩猟可能なのは3種のみ（スズメ、ヒヨドリ、ムクドリ）。覚え方：「ムクドリはオレンジ（橙）色の嘴と脚」。",
                    confusedWith: ["他の小鳥"],
                    huntingNote: "小鳥で狩猟可能な3種の1つ。都市部で群れるため発見は容易だが、狩猟可能区域は限定的。騒音・糞害の駆除対象となることも。小鳥類は原則非狩猟なので、スズメ・ヒヨドリ・ムクドリ以外は絶対に撃たないこと。"
                },
                {
                    name: "ミヤマガラス",
                    category: "カラス類",
                    size: "約47cm",
                    emoji: "🐦",                    features: [
                        "嘴の付け根が白い（重要）",
                        "全身が黒い",
                        "群れで行動",
                        "冬鳥として渡来"
                    ],
                    huntable: true,
                    tip: "嘴の付け根が白いのが最大の識別ポイント。"
                },
                {
                    name: "ハシブトガラス",
                    category: "カラス類",
                    size: "約56cm、体重約550-750g",
                    emoji: "🐦",                    features: [
                        "嘴が太く短く、上嘴が強く曲がる（ハシボソと最大の違い）",
                        "額が盛り上がり、頭頂部が平ら（横から見るとわかる）",
                        "全身が黒く、紫や緑の金属光沢",
                        "「カーカー」と澄んだ声（「ア」の音が明瞭）",
                        "都市部に多く、ゴミを荒らす、樹上で採餌",
                        "雑食性で知能が高い、人の顔を覚える",
                        "繁殖期（3-7月）は巣に近づくと威嚇・攻撃してくる",
                        "歩くときは両足でピョンピョン跳ねる"
                    ],
                    huntable: true,
                    tip: "「ハシブトは額ブット出て、カーカーと鳴く、都会のカラス」。ハシボソは「額平らで、ガーガーと鳴く、田舎のカラス」。嘴の太さと鳴き声で瞬時に判別できるよう訓練を。ミヤマガラスは嘴の付け根が白いので別種。",
                    confusedWith: ["ハシボソガラス", "ミヤマガラス"],
                    huntingNote: "都市部では狩猟区域が限定的。知能が高く警戒心が強いため接近困難。繁殖期は攻撃的で危険。カラスは全般的に肉質が硬く食用には不向き、駆除目的が主。"
                },
                {
                    name: "ハシボソガラス",
                    category: "カラス類",
                    size: "約50cm、体重約400-600g",
                    emoji: "🐦",                    features: [
                        "嘴が細長く、上嘴の曲がりが弱い（ハシブトと最大の違い）",
                        "額が平らで、横から見ても出っ張らない",
                        "全身が黒く、青紫の金属光沢",
                        "「ガーガー」としわがれた濁った声（「ア」が不明瞭）",
                        "農耕地・河川敷・郊外に多い",
                        "地上を歩いて採餌、昆虫や動物の死骸を食べる",
                        "歩くときは交互に足を出して歩く（ハシブトは跳ねる）",
                        "ハシブトより警戒心がやや弱い"
                    ],
                    huntable: true,
                    tip: "「ハシボソは額平らで、ガーガーと鳴く、田舎のカラス」。嘴が細い・額が平ら・濁った声の3点セット。歩き方も違う（ハシボソは歩く、ハシブトは跳ねる）。農地で地面を歩いているカラスは大抵ハシボソ。",
                    confusedWith: ["ハシブトガラス", "ミヤマガラス"],
                    huntingNote: "農耕地に多いため狩猟機会は多いが、警戒心が強い。鳴き声と嘴の形で瞬時に識別できるよう訓練必須。ミヤマガラスとの識別は嘴の付け根（ハシボソは黒、ミヤマは白）。"
                },
                {
                    name: "ハクチョウ類",
                    category: "水鳥",
                    size: "約140-160cm、翼開長200-240cm、体重8-12kg",
                    emoji: "🦢",                    features: [
                        "首が極端に長い（体長の半分以上、S字に曲がる）",
                        "全身が白い（成鳥）、幼鳥は灰色",
                        "嘴は黒い（オオハクチョウ）または黒と黄色（コハクチョウ）",
                        "大型の水鳥、日本で見られる水鳥では最大級",
                        "「コォー」という低く響く声で鳴く",
                        "保護鳥で絶対に狩猟禁止",
                        "冬鳥として渡来、湖や河川に大群で飛来",
                        "優雅な姿、飛翔時は首を伸ばす"
                    ],
                    huntable: false,
                    tip: "首が極端に長い（体の半分以上）水鳥は全て非狩猟鳥獣。ハクチョウ類は保護鳥で絶対に撃ってはいけない。カモ類との違いは首の長さ（カモは首が短い）。覚え方：「ハクチョウは首が超長い、白い、大型、絶対禁猟」。試験頻出。",
                    confusedWith: ["大型の白いカモ類"],
                    huntingNote: "絶対に狩猟禁止。誤射は鳥獣保護法違反で重い罰則。カモ猟の際に湖沼で混在している場合があるため、首の長さで必ず識別すること。"
                },
                {
                    name: "サギ類",
                    category: "水鳥",
                    size: "種により異なる、約60-90cm（ダイサギ、アオサギなど）",
                    emoji: "🐦",                    features: [
                        "首が長い（S字に曲げて飛ぶのが特徴）",
                        "脚が長く、水辺を歩く",
                        "嘴が長く鋭い（魚を捕るのに適応）",
                        "白色（シラサギ類）または灰色（アオサギ）",
                        "水辺に生息、田んぼ・川・池に多い",
                        "じっと動かずに待ち、素早く嘴で魚を捕る",
                        "非狩猟鳥獣で絶対に狩猟禁止",
                        "飛翔時は首をS字に曲げる（ツルは首を伸ばす）"
                    ],
                    huntable: false,
                    tip: "首・脚が長い水鳥は全て非狩猟鳥獣。サギ類は飛ぶときに首をS字に曲げる（ツルは首を伸ばす）。水田でよく見る白い鳥はサギ（非狩猟）。覚え方：「サギは首S字、ツルは首まっすぐ」。",
                    confusedWith: ["ツル類"],
                    huntingNote: "絶対に狩猟禁止。水田や水辺で頻繁に見かけるが、全て保護対象。誤射は鳥獣保護法違反。"
                },
                {
                    name: "ツル類",
                    category: "大型鳥",
                    size: "約100-150cm、翼開長200-240cm",
                    emoji: "🐦",                    features: [
                        "大型の鳥、優雅で堂々とした姿",
                        "首と脚が非常に長い",
                        "頭頂部に赤い皮膚（タンチョウなど、種により異なる）",
                        "飛翔時は首をまっすぐ伸ばす（サギはS字に曲げる）",
                        "「クォー」という大きな声で鳴く",
                        "国の特別天然記念物（タンチョウなど）",
                        "湿地や農耕地に生息、冬鳥として渡来",
                        "非狩猟鳥獣で絶対に狩猟禁止"
                    ],
                    huntable: false,
                    tip: "大型で優雅な鳥は保護鳥。タンチョウは特別天然記念物で絶対禁猟。サギとの違いは飛翔時の首の形（ツルは首をまっすぐ伸ばす、サギはS字に曲げる）。覚え方：「ツルは首まっすぐ、天然記念物、絶対禁猟」。",
                    confusedWith: ["サギ類"],
                    huntingNote: "絶対に狩猟禁止。特別天然記念物の種もあり、誤射は極めて重大な犯罪。飛翔時の首の形で必ず識別すること。"
                },
                {
                    name: "カワセミ",
                    category: "小鳥",
                    size: "約17cm",
                    emoji: "🐦",                    features: [
                        "青い背中",
                        "橙色の腹",
                        "長い嘴",
                        "小型で美しい",
                        "水辺に生息"
                    ],
                    huntable: false,
                    tip: "色鮮やかな小鳥は保護鳥。「飛ぶ宝石」と呼ばれる。",
                    confusedWith: ["なし（独特の外見）"]
                }
            ],
            mammals: [
                {
                    name: "イノシシ",
                    category: "大型獣",
                    size: "体長100-170cm、体重80-150kg（大型個体は200kg超も）",
                    emoji: "🐗",                    features: [
                        "上下の牙が発達（特にオスは長く鋭い、15-20cm）",
                        "茶褐色から黒褐色の剛毛、背中に鬣（たてがみ）状の長毛",
                        "幼獣（ウリボウ）は黄褐色に黒い縦縞模様、生後3-4ヶ月で消失",
                        "鼻先が長く、鼻で地面を掘り返す",
                        "視力は弱いが嗅覚・聴覚が極めて発達",
                        "時速45kmで走り、突進力は凄まじい",
                        "夜行性だが昼間も活動、薄明薄暮に活発",
                        "雑食性で農作物被害が深刻、泥浴びを好む"
                    ],
                    huntable: true,
                    danger: "非常に高",
                    tip: "狩猟獣で最も危険。幼獣（ウリボウ）の近くには必ず母親がいて超危険。覚え方：「イノシシ突進、猪突猛進」。傷つけた個体は逆襲してくるため、仕留め損なうと命の危険。絶対に単独で近づかない。",
                    confusedWith: ["なし（大型で独特）"],
                    huntingNote: "初心者は絶対に避けるべき。経験豊富なハンター同行必須。銃器の威力不足だと逆襲される。猟犬（イノシシ猟専用犬）を使う猟法が一般的。農作物被害が多く駆除対象だが、安易に近づくと死亡事故も。"
                },
                {
                    name: "ニホンジカ",
                    category: "大型獣",
                    size: "体長110-170cm、体重オス50-100kg、メス40-60kg",
                    emoji: "🦌",                    features: [
                        "オスは枝分かれした角（毎年春に落ちて秋に再生、年齢で枝数増）",
                        "夏毛は茶褐色で白い斑点、冬毛は灰褐色で斑点なし",
                        "尻が白い（お尻の白斑が識別の決め手）",
                        "尾は短く、警戒時に白い尻を見せて逃げる",
                        "群れで行動（メスと子の群れ、若オスの群れ、成獣オスは単独）",
                        "警戒心が強く、聴覚・嗅覚が鋭い",
                        "「ピィー」という甲高い声、繁殖期は「キュー」と鳴く",
                        "農林業被害が深刻、食害で森林が丸裸に"
                    ],
                    huntable: true,
                    danger: "中",
                    tip: "白い尻が絶対的な識別ポイント。カモシカと間違えやすいが、カモシカは角が短く太く枝分かれしない。覚え方：「ニホンジカは白いお尻で逃げていく」。繁殖期（秋）のオスは気性が荒く注意。",
                    confusedWith: ["カモシカ（特別天然記念物で非狩猟）"],
                    huntingNote: "発砲前に必ずカモシカでないか確認（角の形状、尻の色）。誤射すると文化財保護法違反で罰金・懲役。角があるオスは繁殖期（9-11月）に攻撃的。群れの中の個体を狙うと他が逃げるため、単独または群れから離れた個体を狙う。"
                },
                {
                    name: "ツキノワグマ",
                    category: "大型獣",
                    size: "体長120-180cm、体重オス50-120kg、メス40-80kg",
                    emoji: "🐻",                    features: [
                        "胸に白い三日月型または半月型の模様（個体差あり、ないものも）",
                        "全身が黒い体毛（ヒグマは褐色）",
                        "鼻先はやや長く、額が平ら",
                        "非常に危険、攻撃的で死亡事故多数",
                        "都道府県によって狩猟禁止（西日本の多くで禁猟）",
                        "雑食性（果実、昆虫、動物の死骸、時に人を襲う）",
                        "木登りが非常に得意（ヒグマより上手）",
                        "本州・四国に生息（北海道はヒグマのみ）"
                    ],
                    huntable: true,
                    danger: "非常に高",
                    tip: "胸の三日月模様が名前の由来だが、模様がない個体もいる。本州・四国のクマはツキノワグマ、北海道のクマはヒグマ（さらに危険）。一部地域では捕獲禁止なので、猟期前に都道府県の規則を必ず確認。覚え方：「ツキノワは月（三日月）の模様、本州四国、木登り上手」。",
                    confusedWith: ["ヒグマ（北海道のみ）"],
                    huntingNote: "極めて危険。初心者は絶対に近づかない。経験豊富なハンター同行必須。一部地域（西日本中心）では個体数減少のため捕獲禁止。猟期前に都道府県の規則を必ず確認。傷つけると逆襲してくるため、確実に仕留める技術が必要。遭遇したら静かに後退、絶対に走って逃げない（追いかけてくる）。"
                },
                {
                    name: "ヒグマ",
                    category: "大型獣",
                    size: "体長180-250cm、体重オス120-400kg（最大級は500kg超）、メス100-200kg",
                    emoji: "🐻",                    features: [
                        "日本最大の陸上哺乳類、成獣は圧倒的な巨体",
                        "体毛は褐色（個体差あり、茶色～黒褐色）、三日月模様なし",
                        "肩にコブ（肩峰）がある（ツキノワグマにはない）",
                        "鼻先が長く、顔が大きい",
                        "北海道のみに生息（本州・四国・九州にはいない）",
                        "極めて危険、攻撃力・破壊力が凄まじい、死亡事故多数",
                        "雑食性だが肉食傾向強い、鮭を捕る姿が有名",
                        "時速50-60kmで走る、泳ぎも得意"
                    ],
                    huntable: true,
                    danger: "非常に高",
                    tip: "日本最大・最強・最も危険な野生動物。北海道のクマは全てヒグマ（本州・四国・九州のクマはツキノワグマ）。ツキノワグマとの違いは①体が巨大、②褐色、③肩にコブ、④三日月模様なし。覚え方：「ヒグマは北海道、褐色、肩にコブ、日本最大」。",
                    confusedWith: ["ツキノワグマ（本州・四国）"],
                    huntingNote: "極めて危険、絶対に素人は近づかない。ベテランハンターでも命がけ。大口径銃必須。傷つけると逆襲が確実で死亡リスク極大。北海道では農業被害・人身被害があり駆除対象だが、専門家のみが対応。遭遇したら静かに後退、死んだふり無効（襲われる）。"
                },
                {
                    name: "タヌキ",
                    category: "中型獣",
                    size: "体長50-60cm、尾長13-25cm、体重3-6kg（秋は10kgに達することも）",
                    emoji: "🦝",                    features: [
                        "ずんぐりした丸みのある体型、短い四肢",
                        "灰褐色の体毛、背中は黒っぽい",
                        "目の周りが黒い（アイマスク状、アライグマより不明瞭）",
                        "尾は太くふさふさ、縞模様なし（アライグマと違う）",
                        "夜行性、薄明薄暮に活発、昼は穴や茂みで休息",
                        "雑食性（昆虫、果実、カエル、ネズミ、残飯など）",
                        "死んだふりをする（タヌキ寝入り）、臆病な性格",
                        "溜め糞（ため糞場を作る習性）、家族で同居"
                    ],
                    huntable: true,
                    danger: "低",
                    tip: "「たぬき寝入り」で有名。アライグマとの違いは尾（タヌキは縞なし、アライグマは縞あり）。アナグマとの違いは顔（タヌキは黒い目の周り、アナグマは白黒縞）。覚え方：「タヌキは尾に縞なし、丸くて太い」。",
                    confusedWith: ["アライグマ（外来種）", "アナグマ"],
                    huntingNote: "攻撃性は低く初心者向き。夜間の林道や農地周辺がねらい目。アライグマと誤認しないよう尾の縞模様を必ず確認（アライグマも狩猟可能だが外来種）。皮は防寒具に利用可能。"
                },
                {
                    name: "キツネ",
                    category: "中型獣",
                    size: "体長60-80cm、尾長35-45cm、体重4-7kg",
                    emoji: "🦊",                    features: [
                        "尖った鼻先と三角の耳（イヌ科特有）",
                        "ふさふさの長い尾（体長の半分以上、尾の先は白い）",
                        "赤褐色の体毛、腹部と喉は白い、四肢の先は黒い",
                        "エキノコックス（寄生虫）の中間宿主、北海道では特に注意",
                        "夜行性だが昼間も活動、薄明薄暮に活発",
                        "単独行動、縄張り意識が強い",
                        "「コンコン」「ゲッゲッ」と鳴く",
                        "肉食傾向強い（ネズミ、ウサギ、鳥、昆虫）"
                    ],
                    huntable: true,
                    danger: "低",
                    tip: "尖った鼻とふさふさの尾が特徴。エキノコックス（寄生虫、肝臓に寄生、致死率高い）に注意、特に北海道。捕獲後は素手で触らず、必ず手袋着用。覚え方：「キツネはエキノ注意、北海道」。尾の先が白いのも識別ポイント。",
                    confusedWith: ["野犬", "タヌキ"],
                    huntingNote: "攻撃性は低いが、エキノコックスの危険があるため捕獲後の扱いに注意。糞尿にも虫卵が含まれるため、キツネの生息地では野外の水や山菜を生食しない。北海道では駆除対象。皮は毛皮として価値あり。"
                },
                {
                    name: "テン",
                    category: "中型獣",
                    size: "体長44-55cm、体重0.9-1.7kg",
                    emoji: "🦡",                    features: [
                        "細長い体型",
                        "夏は褐色、冬は黄色",
                        "喉が白いまたは黄色",
                        "樹上生活が得意"
                    ],
                    huntable: true,
                    danger: "低",
                    tip: "細長い体。季節で色が変わる。"
                },
                {
                    name: "イタチ類",
                    category: "中型獣",
                    size: "体長30-40cm",
                    emoji: "🦡",                    features: [
                        "細長い体型",
                        "短い脚",
                        "褐色の体毛",
                        "オスのみ狩猟可能（重要）"
                    ],
                    huntable: true,
                    danger: "低",
                    tip: "オスのみ狩猟可能。メスは保護対象。",
                    note: "オスのみ狩猟可能"
                },
                {
                    name: "アナグマ",
                    category: "中型獣",
                    size: "体長40-50cm、体重4-12kg",
                    emoji: "🦡",                    features: [
                        "顔に白黒の縞模様（重要）",
                        "ずんぐりした体型",
                        "穴を掘る",
                        "タヌキと混同注意",
                        "夜行性"
                    ],
                    huntable: true,
                    danger: "低",
                    tip: "顔の縞模様が識別ポイント。タヌキより体が太い。",
                    confusedWith: ["タヌキ"]
                },
                {
                    name: "ノウサギ",
                    category: "小型獣",
                    size: "体長45-55cm、耳長7-8cm、体重2-3kg",
                    emoji: "🐰",                    features: [
                        "長い耳（飼いウサギより短め、7-8cm）",
                        "長く発達した後肢（ジャンプ力に優れる）",
                        "茶褐色から灰褐色、腹部は白い",
                        "走るのが非常に速い（時速60-80km）、ジグザグに走る",
                        "夜行性、昼は茂みで休息、薄明薄暮に活発",
                        "単独行動、縄張り意識あり",
                        "草食性（草、木の皮、芽）",
                        "飼いウサギ（カイウサギ）より体が細長く脚が長い"
                    ],
                    huntable: true,
                    danger: "低",
                    tip: "飼いウサギより体が細長く脚が長い。ジグザグに走って逃げるのが野生の証。耳は飼いウサギより短め。覚え方：「ノウサギはノッポで脚長、ジグザグ逃げる」。雪国ではユキウサギ（冬に白くなる）もいる。",
                    confusedWith: ["飼いウサギ（野生化個体）"],
                    huntingNote: "攻撃性はなく初心者向きだが、素早く逃げるため射撃技術が必要。飼いウサギの野生化個体との識別に注意（飼いウサギは丸く耳が長い、ノウサギは細長く耳が短め）。食用として美味。"
                },
                {
                    name: "ユキウサギ",
                    category: "小型獣",
                    size: "体長45-55cm",
                    emoji: "🐰",                    features: [
                        "冬は全身が白い",
                        "夏は茶色",
                        "耳が短め",
                        "雪国に生息"
                    ],
                    huntable: true,
                    danger: "低",
                    tip: "冬に真っ白になる。雪国のウサギ。"
                },
                {
                    name: "アライグマ",
                    category: "中型獣",
                    size: "体長60-95cm",
                    emoji: "🦝",                    features: [
                        "尾に黒い輪の縞模様",
                        "顔に黒いマスク模様",
                        "外来種",
                        "狩猟鳥獣ではない"
                    ],
                    huntable: true,
                    danger: "低",
                    tip: "外来種。尾の縞模様が特徴。",
                    note: "外来種"
                },
                {
                    name: "ハクビシン",
                    category: "中型獣",
                    size: "体長60-66cm",
                    emoji: "🦡",                    features: [
                        "鼻筋に白い線（重要）",
                        "細長い体型",
                        "長い尾",
                        "外来種"
                    ],
                    huntable: true,
                    danger: "低",
                    tip: "鼻筋の白い線が名前の由来。外来種。",
                    note: "外来種"
                },
                {
                    name: "ヌートリア",
                    category: "中型獣",
                    size: "体長50-70cm",
                    emoji: "🦫",                    features: [
                        "大型のネズミのような外見",
                        "オレンジ色の前歯",
                        "水辺に生息",
                        "外来種"
                    ],
                    huntable: true,
                    danger: "低",
                    tip: "大きなネズミのような外見。水辺に生息。外来種。",
                    note: "外来種"
                },
                {
                    name: "サル類",
                    category: "霊長類",
                    size: "体長50-60cm、尾長10cm程度、体重8-18kg（ニホンザル）",
                    emoji: "🐵",                    features: [
                        "霊長類、人間に最も近い動物",
                        "赤い顔と尻（ニホンザル、温泉に入るサルとして有名）",
                        "四肢が発達、手を器用に使う",
                        "群れで行動、社会性が高い",
                        "知能が非常に高い、道具を使うことも",
                        "農作物を荒らすこともあるが、保護対象で絶対に狩猟禁止",
                        "「キッキッ」「ギャー」と鳴く",
                        "木登り・岩登りが得意"
                    ],
                    huntable: false,
                    tip: "霊長類は全て保護対象で絶対に狩猟禁止。ニホンザルは農作物被害があっても、狩猟対象外（行政の許可が必要な有害鳥獣駆除のみ）。覚え方：「サル（霊長類）は絶対ダメ、人間の仲間」。試験頻出の絶対禁猟種。",
                    confusedWith: ["なし（独特の外見）"],
                    huntingNote: "絶対に狩猟禁止。農作物被害があっても個人での捕獲は違法。有害鳥獣駆除は行政の許可が必要。誤射は極めて重大な犯罪。"
                },
                {
                    name: "ムササビ・モモンガ",
                    category: "小型獣",
                    size: "ムササビ：体長27-49cm、モモンガ：体長14-20cm",
                    emoji: "🐿️",                    features: [
                        "前肢と後肢の間に滑空膜（飛膜）を持つ",
                        "滑空膜を広げて木から木へ滑空（数十～100m以上）",
                        "夜行性、大きな目（夜目が利く）",
                        "樹上生活、樹洞に巣を作る",
                        "ムササビは大型、モモンガは小型",
                        "可愛らしい外見、ペットとして人気（野生は保護対象）",
                        "非狩猟鳥獣で絶対に狩猟禁止",
                        "「ギュルギュル」「キュッキュッ」と鳴く"
                    ],
                    huntable: false,
                    tip: "滑空する動物（滑空膜を持つ）は全て保護対象。ムササビは大型（猫サイズ）、モモンガは小型（手のひらサイズ）。覚え方：「滑空膜あり＝絶対禁猟」。リスは滑空せず尾がふさふさで昼行性（リスも非狩猟）。",
                    confusedWith: ["リス（滑空膜なし）"],
                    huntingNote: "絶対に狩猟禁止。夜行性のため夜間に樹上で遭遇する可能性。滑空する姿を見たら必ずムササビ・モモンガと判断し、絶対に撃たない。"
                },
                {
                    name: "オコジョ・イイズナ",
                    category: "小型獣",
                    size: "体長15-30cm",
                    emoji: "🦡",                    features: [
                        "小型のイタチ類",
                        "冬は白くなる",
                        "非常に素早い",
                        "希少",
                        "保護対象"
                    ],
                    huntable: false,
                    tip: "小型のイタチ類は保護対象。イタチの仲間でもオスメス関係なく保護。",
                    confusedWith: ["イタチ"]
                },
                {
                    name: "カモシカ",
                    category: "大型獣",
                    size: "体長105-112cm、体重30-45kg",
                    emoji: "🦌",                    features: [
                        "短く太い角（雌雄共にあり、10-15cm、枝分かれしない、一生生え替わらない）",
                        "体毛は白・灰・黒・茶など個体差大、顔は黒と白のツートン",
                        "尻は白くない（ニホンジカとの最大の違い）",
                        "ずんぐりした体型、四肢が太く短い",
                        "単独または親子で行動、群れは作らない",
                        "特別天然記念物（1955年指定）で絶対に捕獲禁止",
                        "急斜面や崖を登るのが得意、縄張り意識が強い",
                        "「フィー」という鼻息のような声"
                    ],
                    huntable: false,
                    tip: "特別天然記念物で誤射は重大犯罪。ニホンジカとの識別は超重要：①角が短く太く枝分かれしない（ニホンジカは長く枝分かれ）、②尻が白くない（ニホンジカは真っ白）、③群れない（ニホンジカは群れる）。覚え方：「カモシカ短角、シカシカ枝角」。疑わしきは撃たず。",
                    confusedWith: ["ニホンジカ"],
                    huntingNote: "誤射すると文化財保護法違反で5年以下の懲役または30万円以下の罰金。ニホンジカ猟では必ず角と尻を確認。5秒判別トレーニングで完璧に識別できるまで実猟禁止。"
                }
            ]
        };

        // 全データを統合
        let allAnimals = [];
        animalsData.birds.forEach(bird => {
            bird.type = 'bird';
            allAnimals.push(bird);
        });
        animalsData.mammals.forEach(mammal => {
            mammal.type = 'mammal';
            allAnimals.push(mammal);
        });

        // 現在のフィルター
        let currentFilter = 'all';
        let currentMode = 'browse';
        let searchQuery = '';

        // クイズ用変数
        let quizScore = 0;
        let quizTotal = 0;
        let currentQuizAnimal = null;

        // フラッシュカード用変数
        let flashcardIndex = 0;
        let flashcardDeck = [...allAnimals];

        // 初期化
        function init() {
            renderAnimals();
            updateStats();
            setupEventListeners();
        }

        // イベントリスナー設定
        function setupEventListeners() {
            // モード切り替え
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    const mode = btn.dataset.mode;
                    currentMode = mode;

                    document.querySelector('.browse-mode').classList.remove('active');
                    document.getElementById('quizMode').classList.remove('active');
                    document.getElementById('flashcardMode').classList.remove('active');

                    if (mode === 'browse') {
                        document.querySelector('.browse-mode').classList.add('active');
                    } else if (mode === 'quiz') {
                        document.getElementById('quizMode').classList.add('active');
                        nextQuiz();
                    } else if (mode === 'flashcard') {
                        document.getElementById('flashcardMode').classList.add('active');
                        showFlashcard();
                    }
                });
            });

            // フィルターボタン
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentFilter = btn.dataset.filter;
                    renderAnimals();
                    updateStats();
                });
            });

            // 検索
            document.getElementById('searchInput').addEventListener('input', (e) => {
                searchQuery = e.target.value.toLowerCase();
                renderAnimals();
            });

            // クイズイベント
            document.querySelectorAll('.quiz-option').forEach(btn => {
                btn.addEventListener('click', () => {
                    checkQuizAnswer(btn.dataset.answer);
                });
            });

            document.getElementById('nextQuiz').addEventListener('click', nextQuiz);
            document.getElementById('showAnswer').addEventListener('click', showQuizAnswer);

            // フラッシュカードイベント
            document.getElementById('flashcard').addEventListener('click', flipCard);
            document.getElementById('nextCard').addEventListener('click', () => {
                flashcardIndex = (flashcardIndex + 1) % flashcardDeck.length;
                document.getElementById('flashcard').classList.remove('flipped');
                showFlashcard();
            });
            document.getElementById('shuffleCards').addEventListener('click', () => {
                flashcardDeck = shuffleArray([...allAnimals]);
                flashcardIndex = 0;
                document.getElementById('flashcard').classList.remove('flipped');
                showFlashcard();
            });
        }

        // 動物カード表示
        function renderAnimals() {
            const grid = document.getElementById('animalGrid');
            const noResults = document.getElementById('noResults');
            grid.innerHTML = '';

            let filteredAnimals = allAnimals.filter(animal => {
                // フィルター適用
                if (currentFilter === 'huntable' && !animal.huntable) return false;
                if (currentFilter === 'non-huntable' && animal.huntable) return false;
                if (currentFilter === 'birds' && animal.type !== 'bird') return false;
                if (currentFilter === 'mammals' && animal.type !== 'mammal') return false;
                if (currentFilter === 'ducks' && !animal.category.includes('カモ')) return false;
                if (currentFilter === 'crows' && !animal.category.includes('カラス')) return false;

                // 検索適用
                if (searchQuery && !animal.name.toLowerCase().includes(searchQuery)) return false;

                return true;
            });

            if (filteredAnimals.length === 0) {
                grid.style.display = 'none';
                noResults.style.display = 'block';
                return;
            }

            grid.style.display = 'grid';
            noResults.style.display = 'none';

            filteredAnimals.forEach(animal => {
                const card = createAnimalCard(animal);
                grid.appendChild(card);
            });
        }

        // 動物カード作成
        function createAnimalCard(animal) {
            const card = document.createElement('div');
            card.className = `animal-card ${animal.huntable ? 'huntable' : 'non-huntable'}`;

            const visualClass = animal.type === 'bird' ? 'bird' : 'mammal';

            let dangerBadge = '';
            if (animal.danger) {
                const dangerClass = animal.danger === '非常に高' ? 'danger-high' :
                                   animal.danger === '中' ? 'danger-medium' : 'danger-low';
                dangerBadge = `<span class="danger-badge ${dangerClass}">危険度: ${animal.danger}</span>`;
            }

            let tipBox = '';
            if (animal.tip) {
                tipBox = `<div class="tip-box"><strong>覚え方：</strong> ${animal.tip}</div>`;
            }

            let confusedBox = '';
            if (animal.confusedWith && animal.confusedWith.length > 0) {
                confusedBox = `<div class="tip-box" style="border-color: #dc3545; background: #f8d7da;">
                    <strong>間違えやすい種：</strong> ${animal.confusedWith.join('、')}
                </div>`;
            }

            card.innerHTML = `
                <div class="animal-visual ${visualClass}">
                    ${animal.imageUrl ? `<img src="${animal.imageUrl}" alt="${animal.name}" loading="lazy">` : animal.emoji}
                    <div class="status-badge ${animal.huntable ? 'huntable' : 'non-huntable'}">
                        ${animal.huntable ? '狩猟鳥獣' : '非狩猟鳥獣'}
                    </div>
                </div>
                <div class="animal-info">
                    <div class="animal-name">${animal.name}</div>
                    <div class="animal-category">${animal.category}</div>
                    <div class="animal-size">📏 ${animal.size}</div>
                    ${dangerBadge}
                    <ul class="features-list">
                        ${animal.features.map(f => `<li>${f}</li>`).join('')}
                    </ul>
                    ${tipBox}
                    ${confusedBox}
                    ${animal.note ? `<div class="tip-box" style="border-color: #dc3545; background: #fff3cd;"><strong>注意：</strong> ${animal.note}</div>` : ''}
                </div>
            `;

            return card;
        }

        // 統計更新
        function updateStats() {
            const filtered = allAnimals.filter(animal => {
                if (currentFilter === 'huntable' && !animal.huntable) return false;
                if (currentFilter === 'non-huntable' && animal.huntable) return false;
                if (currentFilter === 'birds' && animal.type !== 'bird') return false;
                if (currentFilter === 'mammals' && animal.type !== 'mammal') return false;
                if (currentFilter === 'ducks' && !animal.category.includes('カモ')) return false;
                if (currentFilter === 'crows' && !animal.category.includes('カラス')) return false;
                return true;
            });

            const huntable = filtered.filter(a => a.huntable);
            const nonHuntable = filtered.filter(a => !a.huntable);

            document.getElementById('totalCount').textContent = filtered.length;
            document.getElementById('huntableCount').textContent = huntable.length;
            document.getElementById('nonHuntableCount').textContent = nonHuntable.length;
        }

        // クイズ関連
        function nextQuiz() {
            currentQuizAnimal = allAnimals[Math.floor(Math.random() * allAnimals.length)];

            const quizVisual = document.getElementById('quizVisual');
            if (currentQuizAnimal.imageUrl) {
                quizVisual.innerHTML = `<img src="${currentQuizAnimal.imageUrl}" alt="${currentQuizAnimal.name}" style="max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 15px;">`;
            } else {
                quizVisual.textContent = currentQuizAnimal.emoji;
            }
            document.getElementById('quizQuestion').textContent = `この鳥獣は狩猟鳥獣ですか？\n「${currentQuizAnimal.name}」`;
            document.getElementById('quizResult').style.display = 'none';

            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
                opt.disabled = false;
            });
        }

        function checkQuizAnswer(answer) {
            const correct = (answer === 'huntable' && currentQuizAnimal.huntable) ||
                          (answer === 'non-huntable' && !currentQuizAnimal.huntable);

            quizTotal++;
            if (correct) quizScore++;

            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.disabled = true;
                if (opt.dataset.answer === 'huntable' && currentQuizAnimal.huntable) {
                    opt.classList.add('correct');
                } else if (opt.dataset.answer === 'non-huntable' && !currentQuizAnimal.huntable) {
                    opt.classList.add('correct');
                } else if (opt.dataset.answer === answer && !correct) {
                    opt.classList.add('incorrect');
                }
            });

            const resultDiv = document.getElementById('quizResult');
            resultDiv.className = `quiz-result ${correct ? 'correct' : 'incorrect'}`;
            resultDiv.innerHTML = correct ?
                `<strong>✓ 正解！</strong><br>${currentQuizAnimal.tip || ''}` :
                `<strong>✗ 不正解</strong><br>正解: ${currentQuizAnimal.huntable ? '狩猟鳥獣' : '非狩猟鳥獣'}<br>${currentQuizAnimal.tip || ''}`;
            resultDiv.style.display = 'block';

            updateQuizStats();
        }

        function showQuizAnswer() {
            const resultDiv = document.getElementById('quizResult');
            resultDiv.className = 'quiz-result';
            resultDiv.innerHTML = `
                <strong>答え: ${currentQuizAnimal.huntable ? '狩猟鳥獣' : '非狩猟鳥獣'}</strong><br>
                ${currentQuizAnimal.tip || ''}<br>
                <strong>特徴:</strong><br>
                ${currentQuizAnimal.features.slice(0, 3).join('<br>')}
            `;
            resultDiv.style.display = 'block';
        }

        function updateQuizStats() {
            document.getElementById('quizScore').textContent = quizScore;
            document.getElementById('quizTotal').textContent = quizTotal;
            const accuracy = quizTotal > 0 ? Math.round((quizScore / quizTotal) * 100) : 0;
            document.getElementById('quizAccuracy').textContent = accuracy + '%';
        }

        // フラッシュカード関連
        function showFlashcard() {
            const animal = flashcardDeck[flashcardIndex];

            const flashcardVisual = document.getElementById('flashcardVisual');
            if (animal.imageUrl) {
                flashcardVisual.innerHTML = `<img src="${animal.imageUrl}" alt="${animal.name}" style="max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 15px;">`;
            } else {
                flashcardVisual.textContent = animal.emoji;
            }
            document.getElementById('flashcardName').textContent = animal.name;

            const details = `
                <h3>${animal.name}</h3>
                <p><strong>分類:</strong> ${animal.category}</p>
                <p><strong>サイズ:</strong> ${animal.size}</p>
                <p><strong>狩猟:</strong> ${animal.huntable ? '狩猟鳥獣 ✓' : '非狩猟鳥獣 ✗'}</p>
                <hr>
                <p><strong>特徴:</strong></p>
                <ul style="text-align: left;">
                    ${animal.features.slice(0, 4).map(f => `<li>${f}</li>`).join('')}
                </ul>
                ${animal.tip ? `<p><strong>覚え方:</strong> ${animal.tip}</p>` : ''}
            `;

            document.getElementById('flashcardDetails').innerHTML = details;
            document.getElementById('cardIndex').textContent = flashcardIndex + 1;
            document.getElementById('cardTotal').textContent = flashcardDeck.length;
        }

        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // 初期化実行
        init();
    </script>
    <script src="ux-enhancements.js"></script>
    <script src="ui-polish.js"></script>
    <script src="global-navigation.js"></script>
</body>
</html>
